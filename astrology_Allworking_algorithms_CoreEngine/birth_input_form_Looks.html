<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Birth Details Input Form - Astrology Module</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* Color scheme matching your birth chart wheel */
        :root {
            --primary-bg: #2B3990;
            --secondary-bg: #454FBF;
            --accent-gold: #F5A623;
            --text-white: #ffffff;
            --card-border: #F5A623;
            --success-green: #22c55e;
            --error-red: #ef4444;
            --input-bg: rgba(69, 79, 191, 0.3);
            --input-border: rgba(245, 166, 35, 0.5);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Arial', sans-serif;
            background: var(--primary-bg);
            color: var(--text-white);
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        
        .form-container {
            max-width: 800px;
            margin: 0 auto;
            background: var(--secondary-bg);
            border: 2px solid var(--card-border);
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .form-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .form-header h1 {
            color: var(--accent-gold);
            font-size: 2.5rem;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .form-subtitle {
            color: var(--text-white);
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 20px;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(245, 166, 35, 0.2);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 30px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-gold) 0%, #ffcd3c 100%);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .form-section {
            margin-bottom: 30px;
            padding: 25px;
            background: var(--input-bg);
            border-radius: 12px;
            border: 1px solid var(--input-border);
        }
        
        .section-title {
            color: var(--accent-gold);
            font-size: 1.4rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-icon {
            font-size: 1.5rem;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .form-row.single {
            grid-template-columns: 1fr;
        }
        
        label {
            display: block;
            color: var(--text-white);
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 0.95rem;
        }
        
        .label-required {
            color: var(--error-red);
            margin-left: 3px;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--input-border);
            border-radius: 8px;
            background: var(--input-bg);
            color: var(--text-white);
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--accent-gold);
            box-shadow: 0 0 0 3px rgba(245, 166, 35, 0.2);
        }
        
        input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        .location-search {
            position: relative;
        }
        
        .location-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--secondary-bg);
            border: 1px solid var(--input-border);
            border-radius: 8px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
        }
        
        .location-suggestion {
            padding: 12px 15px;
            cursor: pointer;
            border-bottom: 1px solid rgba(245, 166, 35, 0.2);
            transition: background 0.2s ease;
        }
        
        .location-suggestion:hover {
            background: rgba(245, 166, 35, 0.1);
        }
        
        .location-suggestion:last-child {
            border-bottom: none;
        }
        
        .time-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
        }
        
        .validation-message {
            margin-top: 5px;
            font-size: 0.85rem;
            display: none;
        }
        
        .validation-error {
            color: var(--error-red);
            display: block;
        }
        
        .validation-success {
            color: var(--success-green);
            display: block;
        }
        
        .form-actions {
            text-align: center;
            margin-top: 40px;
        }
        
        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--accent-gold) 0%, #ffcd3c 100%);
            color: var(--primary-bg);
            box-shadow: 0 4px 15px rgba(245, 166, 35, 0.3);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(245, 166, 35, 0.4);
        }
        
        .btn-secondary {
            background: transparent;
            color: var(--text-white);
            border: 2px solid var(--input-border);
            margin-right: 15px;
        }
        
        .btn-secondary:hover {
            background: var(--input-border);
            color: var(--primary-bg);
        }
        
        .info-tooltip {
            position: relative;
            display: inline-block;
            margin-left: 5px;
            color: var(--accent-gold);
            cursor: help;
        }
        
        .info-tooltip .tooltip-text {
            visibility: hidden;
            width: 250px;
            background: var(--primary-bg);
            color: var(--text-white);
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -125px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85rem;
            border: 1px solid var(--accent-gold);
        }
        
        .info-tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
        
        .loading-spinner {
            width: 20px;
            height: 20px;
            border: 2px solid var(--input-border);
            border-top: 2px solid var(--accent-gold);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            display: none;
            margin-left: 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .feature-highlight {
            background: rgba(245, 166, 35, 0.1);
            border: 1px solid var(--accent-gold);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .feature-highlight h4 {
            color: var(--accent-gold);
            margin-bottom: 8px;
        }
        
        .feature-highlight p {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .form-container {
                padding: 25px;
            }
            
            .form-header h1 {
                font-size: 2rem;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .time-inputs {
                grid-template-columns: 1fr;
            }
            
            .btn {
                width: 100%;
                margin-bottom: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="form-container">
        <div class="form-header">
            <h1>🌟 Birth Details Input</h1>
            <p class="form-subtitle">Accurate birth information for precise astrological calculations</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>
        
        <div class="feature-highlight">
            <h4>🎯 World-Class Accuracy</h4>
            <p>Using Swiss Ephemeris with <0.1 arcsecond precision for the most accurate planetary positions globally</p>
        </div>
        
        <form id="birthDetailsForm">
            <!-- Personal Information Section -->
            <div class="form-section" id="personalSection">
                <h3 class="section-title">
                    <span class="section-icon">👤</span>
                    Personal Information
                </h3>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="firstName">
                            First Name <span class="label-required">*</span>
                        </label>
                        <input type="text" id="firstName" name="firstName" required 
                               placeholder="Enter your first name">
                        <div class="validation-message" id="firstNameError"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="lastName">
                            Last Name <span class="label-required">*</span>
                        </label>
                        <input type="text" id="lastName" name="lastName" required 
                               placeholder="Enter your last name">
                        <div class="validation-message" id="lastNameError"></div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="gender">
                            Gender <span class="label-required">*</span>
                        </label>
                        <select id="gender" name="gender" required>
                            <option value="">Select Gender</option>
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                            <option value="other">Other</option>
                        </select>
                        <div class="validation-message" id="genderError"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="email">
                            Email Address
                        </label>
                        <input type="email" id="email" name="email" 
                               placeholder="your.email@example.com">
                        <div class="validation-message" id="emailError"></div>
                    </div>
                </div>
            </div>
            
            <!-- Birth Date & Time Section -->
            <div class="form-section" id="dateTimeSection">
                <h3 class="section-title">
                    <span class="section-icon">📅</span>
                    Birth Date & Time
                    <span class="info-tooltip">ℹ️
                        <span class="tooltip-text">Accurate birth time is crucial for precise house calculations and predictions</span>
                    </span>
                </h3>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="birthDate">
                            Birth Date <span class="label-required">*</span>
                        </label>
                        <input type="date" id="birthDate" name="birthDate" required>
                        <div class="validation-message" id="birthDateError"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="birthTime">
                            Birth Time <span class="label-required">*</span>
                            <span class="info-tooltip">ℹ️
                                <span class="tooltip-text">If exact time unknown, use 12:00 PM as default. Check birth certificate for accuracy.</span>
                            </span>
                        </label>
                        <div class="time-inputs">
                            <input type="number" id="birthHour" name="birthHour" min="0" max="23" 
                                   placeholder="Hour (0-23)" required>
                            <input type="number" id="birthMinute" name="birthMinute" min="0" max="59" 
                                   placeholder="Minute (0-59)" required>
                            <select id="timeKnown" name="timeKnown">
                                <option value="exact">Exact Time</option>
                                <option value="approximate">Approximate</option>
                                <option value="unknown">Unknown</option>
                            </select>
                        </div>
                        <div class="validation-message" id="birthTimeError"></div>
                    </div>
                </div>
            </div>
            
            <!-- Birth Location Section -->
            <div class="form-section" id="locationSection">
                <h3 class="section-title">
                    <span class="section-icon">🌍</span>
                    Birth Location
                    <span class="info-tooltip">ℹ️
                        <span class="tooltip-text">Location determines house cusps and local planetary positions</span>
                    </span>
                </h3>
                
                <div class="form-row single">
                    <div class="form-group">
                        <label for="birthPlace">
                            Birth Place <span class="label-required">*</span>
                        </label>
                        <div class="location-search">
                            <input type="text" id="birthPlace" name="birthPlace" required 
                                   placeholder="Start typing city name...">
                            <div class="location-suggestions" id="locationSuggestions"></div>
                            <div class="loading-spinner" id="locationSpinner"></div>
                        </div>
                        <div class="validation-message" id="birthPlaceError"></div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="country">
                            Country <span class="label-required">*</span>
                        </label>
                        <select id="country" name="country" required>
                            <option value="">Select Country</option>
                            <option value="IN">India</option>
                            <option value="US">United States</option>
                            <option value="UK">United Kingdom</option>
                            <option value="CA">Canada</option>
                            <option value="AU">Australia</option>
                            <option value="DE">Germany</option>
                            <option value="FR">France</option>
                            <option value="IT">Italy</option>
                            <option value="ES">Spain</option>
                            <option value="JP">Japan</option>
                            <option value="CN">China</option>
                            <option value="BR">Brazil</option>
                            <option value="RU">Russia</option>
                            <option value="ZA">South Africa</option>
                            <option value="MX">Mexico</option>
                            <option value="AR">Argentina</option>
                            <option value="EG">Egypt</option>
                            <option value="NG">Nigeria</option>
                            <option value="PK">Pakistan</option>
                            <option value="BD">Bangladesh</option>
                            <option value="ID">Indonesia</option>
                            <option value="TH">Thailand</option>
                            <option value="MY">Malaysia</option>
                            <option value="SG">Singapore</option>
                            <option value="PH">Philippines</option>
                            <option value="VN">Vietnam</option>
                            <option value="KR">South Korea</option>
                            <option value="TR">Turkey</option>
                            <option value="SA">Saudi Arabia</option>
                            <option value="AE">UAE</option>
                            <option value="IL">Israel</option>
                            <option value="GR">Greece</option>
                            <option value="PT">Portugal</option>
                            <option value="NL">Netherlands</option>
                            <option value="BE">Belgium</option>
                            <option value="CH">Switzerland</option>
                            <option value="AT">Austria</option>
                            <option value="SE">Sweden</option>
                            <option value="NO">Norway</option>
                            <option value="DK">Denmark</option>
                            <option value="FI">Finland</option>
                            <option value="PL">Poland</option>
                            <option value="CZ">Czech Republic</option>
                            <option value="HU">Hungary</option>
                            <option value="RO">Romania</option>
                            <option value="BG">Bulgaria</option>
                            <option value="HR">Croatia</option>
                            <option value="SI">Slovenia</option>
                            <option value="SK">Slovakia</option>
                            <option value="LT">Lithuania</option>
                            <option value="LV">Latvia</option>
                            <option value="EE">Estonia</option>
                            <option value="IE">Ireland</option>
                            <option value="IS">Iceland</option>
                            <option value="MT">Malta</option>
                            <option value="CY">Cyprus</option>
                            <option value="LU">Luxembourg</option>
                            <option value="MC">Monaco</option>
                            <option value="AD">Andorra</option>
                            <option value="SM">San Marino</option>
                            <option value="VA">Vatican City</option>
                            <option value="LI">Liechtenstein</option>
                            <option value="NZ">New Zealand</option>
                            <option value="FJ">Fiji</option>
                            <option value="PG">Papua New Guinea</option>
                            <option value="NC">New Caledonia</option>
                            <option value="VU">Vanuatu</option>
                            <option value="SB">Solomon Islands</option>
                            <option value="TV">Tuvalu</option>
                            <option value="NR">Nauru</option>
                            <option value="KI">Kiribati</option>
                            <option value="PW">Palau</option>
                        </select>
                        <div class="validation-message" id="countryError"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="timezone">
                            Timezone <span class="label-required">*</span>
                        </label>
                        <select id="timezone" name="timezone" required>
                            <option value="">Select Timezone</option>
                            <option value="UTC-12:00">UTC-12:00 (Baker Island)</option>
                            <option value="UTC-11:00">UTC-11:00 (American Samoa)</option>
                            <option value="UTC-10:00">UTC-10:00 (Hawaii)</option>
                            <option value="UTC-09:30">UTC-09:30 (Marquesas)</option>
                            <option value="UTC-09:00">UTC-09:00 (Alaska)</option>
                            <option value="UTC-08:00">UTC-08:00 (Pacific Time)</option>
                            <option value="UTC-07:00">UTC-07:00 (Mountain Time)</option>
                            <option value="UTC-06:00">UTC-06:00 (Central Time)</option>
                            <option value="UTC-05:00">UTC-05:00 (Eastern Time)</option>
                            <option value="UTC-04:30">UTC-04:30 (Venezuela)</option>
                            <option value="UTC-04:00">UTC-04:00 (Atlantic Time)</option>
                            <option value="UTC-03:30">UTC-03:30 (Newfoundland)</option>
                            <option value="UTC-03:00">UTC-03:00 (Brazil/Argentina)</option>
                            <option value="UTC-02:00">UTC-02:00 (South Georgia)</option>
                            <option value="UTC-01:00">UTC-01:00 (Azores)</option>
                            <option value="UTC+00:00">UTC+00:00 (London/Dublin)</option>
                            <option value="UTC+01:00">UTC+01:00 (Central Europe)</option>
                            <option value="UTC+02:00">UTC+02:00 (Eastern Europe)</option>
                            <option value="UTC+03:00">UTC+03:00 (Moscow/Arabia)</option>
                            <option value="UTC+03:30">UTC+03:30 (Iran)</option>
                            <option value="UTC+04:00">UTC+04:00 (Gulf/Caucasus)</option>
                            <option value="UTC+04:30">UTC+04:30 (Afghanistan)</option>
                            <option value="UTC+05:00">UTC+05:00 (Pakistan)</option>
                            <option value="UTC+05:30">UTC+05:30 (India/Sri Lanka)</option>
                            <option value="UTC+05:45">UTC+05:45 (Nepal)</option>
                            <option value="UTC+06:00">UTC+06:00 (Bangladesh)</option>
                            <option value="UTC+06:30">UTC+06:30 (Myanmar)</option>
                            <option value="UTC+07:00">UTC+07:00 (Thailand/Vietnam)</option>
                            <option value="UTC+08:00">UTC+08:00 (China/Singapore)</option>
                            <option value="UTC+08:30">UTC+08:30 (North Korea)</option>
                            <option value="UTC+09:00">UTC+09:00 (Japan/Korea)</option>
                            <option value="UTC+09:30">UTC+09:30 (Australia Central)</option>
                            <option value="UTC+10:00">UTC+10:00 (Australia Eastern)</option>
                            <option value="UTC+10:30">UTC+10:30 (Lord Howe Island)</option>
                            <option value="UTC+11:00">UTC+11:00 (Solomon Islands)</option>
                            <option value="UTC+11:30">UTC+11:30 (Norfolk Island)</option>
                            <option value="UTC+12:00">UTC+12:00 (New Zealand)</option>
                            <option value="UTC+12:45">UTC+12:45 (Chatham Islands)</option>
                            <option value="UTC+13:00">UTC+13:00 (Tonga)</option>
                            <option value="UTC+14:00">UTC+14:00 (Line Islands)</option>
                        </select>
                        <div class="validation-message" id="timezoneError"></div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="latitude">
                            Latitude <span class="label-required">*</span>
                            <span class="info-tooltip">ℹ️
                                <span class="tooltip-text">Will be auto-filled when you select birth place</span>
                            </span>
                        </label>
                        <input type="number" id="latitude" name="latitude" step="0.000001" 
                               placeholder="e.g., 28.6139" required readonly>
                        <div class="validation-message" id="latitudeError"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="longitude">
                            Longitude <span class="label-required">*</span>
                            <span class="info-tooltip">ℹ️
                                <span class="tooltip-text">Will be auto-filled when you select birth place</span>
                            </span>
                        </label>
                        <input type="number" id="longitude" name="longitude" step="0.000001" 
                               placeholder="e.g., 77.2090" required readonly>
                        <div class="validation-message" id="longitudeError"></div>
                    </div>
                </div>
            </div>
            
            <!-- Chart Preferences Section -->
            <div class="form-section" id="preferencesSection">
                <h3 class="section-title">
                    <span class="section-icon">⚙️</span>
                    Chart Preferences
                </h3>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="chartSystem">
                            Chart System <span class="label-required">*</span>
                        </label>
                        <select id="chartSystem" name="chartSystem" required>
                            <option value="">Select Chart System</option>
                            <option value="vedic">Vedic (Sidereal)</option>
                            <option value="western">Western (Tropical)</option>
                            <option value="both">Both Systems</option>
                        </select>
                        <div class="validation-message" id="chartSystemError"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="houseSystem">
                            House System <span class="label-required">*</span>
                        </label>
                        <select id="houseSystem" name="houseSystem" required>
                            <option value="">Select House System</option>
                            <option value="placidus">Placidus</option>
                            <option value="koch">Koch</option>
                            <option value="equal">Equal House</option>
                            <option value="whole">Whole Sign</option>
                            <option value="campanus">Campanus</option>
                            <option value="regiomontanus">Regiomontanus</option>
                        </select>
                        <div class="validation-message" id="houseSystemError"></div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="ayanamsa">
                            Ayanamsa (for Vedic) <span class="label-required">*</span>
                        </label>
                        <select id="ayanamsa" name="ayanamsa" required>
                            <option value="">Select Ayanamsa</option>
                            <option value="lahiri">Lahiri (Chitrapaksha)</option>
                            <option value="krishnamurti">Krishnamurti</option>
                            <option value="raman">Raman</option>
                            <option value="yukteshwar">Yukteshwar</option>
                            <option value="djwhal_khul">Djwhal Khul</option>
                            <option value="sassanian">Sassanian</option>
                        </select>
                        <div class="validation-message" id="ayanamsaError"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="language">
                            Preferred Language
                        </label>
                        <select id="language" name="language">
                            <option value="en">English</option>
                            <option value="hi">Hindi</option>
                            <option value="es">Spanish</option>
                            <option value="fr">French</option>
                            <option value="de">German</option>
                            <option value="it">Italian</option>
                            <option value="pt">Portuguese</option>
                            <option value="ru">Russian</option>
                            <option value="zh">Chinese</option>
                            <option value="ja">Japanese</option>
                            <option value="ko">Korean</option>
                            <option value="ar">Arabic</option>
                        </select>
                        <div class="validation-message" id="languageError"></div>
                    </div>
                </div>
            </div>
            
            <!-- Form Actions -->
            <div class="form-actions">
                <button type="button" class="btn btn-secondary" id="clearForm">
                    Clear Form
                </button>
                <button type="submit" class="btn btn-primary" id="generateChart">
                    Generate Birth Chart
                </button>
            </div>
        </form>
    </div>
    
    <script>
        // Sample location data for demonstration
        const locationData = [
            { name: 'New Delhi, India', lat: 28.6139, lng: 77.2090, country: 'IN', timezone: 'UTC+05:30' },
            { name: 'Mumbai, India', lat: 19.0760, lng: 72.8777, country: 'IN', timezone: 'UTC+05:30' },
            { name: 'Bengaluru, India', lat: 12.9716, lng: 77.5946, country: 'IN', timezone: 'UTC+05:30' },
            { name: 'Chennai, India', lat: 13.0827, lng: 80.2707, country: 'IN', timezone: 'UTC+05:30' },
            { name: 'Kolkata, India', lat: 22.5726, lng: 88.3639, country: 'IN', timezone: 'UTC+05:30' },
            { name: 'Hyderabad, India', lat: 17.3850, lng: 78.4867, country: 'IN', timezone: 'UTC+05:30' },
            { name: 'Pune, India', lat: 18.5204, lng: 73.8567, country: 'IN', timezone: 'UTC+05:30' },
            { name: 'Ahmedabad, India', lat: 23.0225, lng: 72.5714, country: 'IN', timezone: 'UTC+05:30' },
            { name: 'Jaipur, India', lat: 26.9124, lng: 75.7873, country: 'IN', timezone: 'UTC+05:30' },
            { name: 'Lucknow, India', lat: 26.8467, lng: 80.9462, country: 'IN', timezone: 'UTC+05:30' },
            { name: 'New York, USA', lat: 40.7128, lng: -74.0060, country: 'US', timezone: 'UTC-05:00' },
            { name: 'Los Angeles, USA', lat: 34.0522, lng: -118.2437, country: 'US', timezone: 'UTC-08:00' },
            { name: 'Chicago, USA', lat: 41.8781, lng: -87.6298, country: 'US', timezone: 'UTC-06:00' },
            { name: 'Houston, USA', lat: 29.7604, lng: -95.3698, country: 'US', timezone: 'UTC-06:00' },
            { name: 'Phoenix, USA', lat: 33.4484, lng: -112.0740, country: 'US', timezone: 'UTC-07:00' },
            { name: 'London, UK', lat: 51.5074, lng: -0.1278, country: 'UK', timezone: 'UTC+00:00' },
            { name: 'Manchester, UK', lat: 53.4808, lng: -2.2426, country: 'UK', timezone: 'UTC+00:00' },
            { name: 'Birmingham, UK', lat: 52.4862, lng: -1.8904, country: 'UK', timezone: 'UTC+00:00' },
            { name: 'Toronto, Canada', lat: 43.6532, lng: -79.3832, country: 'CA', timezone: 'UTC-05:00' },
            { name: 'Vancouver, Canada', lat: 49.2827, lng: -123.1207, country: 'CA', timezone: 'UTC-08:00' },
            { name: 'Montreal, Canada', lat: 45.5017, lng: -73.5673, country: 'CA', timezone: 'UTC-05:00' },
            { name: 'Sydney, Australia', lat: -33.8688, lng: 151.2093, country: 'AU', timezone: 'UTC+10:00' },
            { name: 'Melbourne, Australia', lat: -37.8136, lng: 144.9631, country: 'AU', timezone: 'UTC+10:00' },
            { name: 'Brisbane, Australia', lat: -27.4698, lng: 153.0251, country: 'AU', timezone: 'UTC+10:00' },
            { name: 'Berlin, Germany', lat: 52.5200, lng: 13.4050, country: 'DE', timezone: 'UTC+01:00' },
            { name: 'Munich, Germany', lat: 48.1351, lng: 11.5820, country: 'DE', timezone: 'UTC+01:00' },
            { name: 'Hamburg, Germany', lat: 53.5511, lng: 9.9937, country: 'DE', timezone: 'UTC+01:00' },
            { name: 'Paris, France', lat: 48.8566, lng: 2.3522, country: 'FR', timezone: 'UTC+01:00' },
            { name: 'Lyon, France', lat: 45.7640, lng: 4.8357, country: 'FR', timezone: 'UTC+01:00' },
            { name: 'Marseille, France', lat: 43.2965, lng: 5.3698, country: 'FR', timezone: 'UTC+01:00' },
            { name: 'Rome, Italy', lat: 41.9028, lng: 12.4964, country: 'IT', timezone: 'UTC+01:00' },
            { name: 'Milan, Italy', lat: 45.4642, lng: 9.1900, country: 'IT', timezone: 'UTC+01:00' },
            { name: 'Naples, Italy', lat: 40.8518, lng: 14.2681, country: 'IT', timezone: 'UTC+01:00' },
            { name: 'Madrid, Spain', lat: 40.4168, lng: -3.7038, country: 'ES', timezone: 'UTC+01:00' },
            { name: 'Barcelona, Spain', lat: 41.3851, lng: 2.1734, country: 'ES', timezone: 'UTC+01:00' },
            { name: 'Tokyo, Japan', lat: 35.6762, lng: 139.6503, country: 'JP', timezone: 'UTC+09:00' },
            { name: 'Osaka, Japan', lat: 34.6937, lng: 135.5023, country: 'JP', timezone: 'UTC+09:00' },
            { name: 'Beijing, China', lat: 39.9042, lng: 116.4074, country: 'CN', timezone: 'UTC+08:00' },
            { name: 'Shanghai, China', lat: 31.2304, lng: 121.4737, country: 'CN', timezone: 'UTC+08:00' },
            { name: 'Singapore', lat: 1.3521, lng: 103.8198, country: 'SG', timezone: 'UTC+08:00' },
            { name: 'Dubai, UAE', lat: 25.2048, lng: 55.2708, country: 'AE', timezone: 'UTC+04:00' },
            { name: 'Hong Kong', lat: 22.3193, lng: 114.1694, country: 'HK', timezone: 'UTC+08:00' },
            { name: 'Seoul, South Korea', lat: 37.5665, lng: 126.9780, country: 'KR', timezone: 'UTC+09:00' },
            { name: 'Bangkok, Thailand', lat: 13.7563, lng: 100.5018, country: 'TH', timezone: 'UTC+07:00' },
            { name: 'Kuala Lumpur, Malaysia', lat: 3.1390, lng: 101.6869, country: 'MY', timezone: 'UTC+08:00' },
            { name: 'Jakarta, Indonesia', lat: -6.2088, lng: 106.8456, country: 'ID', timezone: 'UTC+07:00' },
            { name: 'Manila, Philippines', lat: 14.5995, lng: 120.9842, country: 'PH', timezone: 'UTC+08:00' },
            { name: 'Istanbul, Turkey', lat: 41.0082, lng: 28.9784, country: 'TR', timezone: 'UTC+03:00' },
            { name: 'Cairo, Egypt', lat: 30.0444, lng: 31.2357, country: 'EG', timezone: 'UTC+02:00' },
            { name: 'Moscow, Russia', lat: 55.7558, lng: 37.6173, country: 'RU', timezone: 'UTC+03:00' },
            { name: 'São Paulo, Brazil', lat: -23.5505, lng: -46.6333, country: 'BR', timezone: 'UTC-03:00' },
            { name: 'Rio de Janeiro, Brazil', lat: -22.9068, lng: -43.1729, country: 'BR', timezone: 'UTC-03:00' },
            { name: 'Buenos Aires, Argentina', lat: -34.6118, lng: -58.3960, country: 'AR', timezone: 'UTC-03:00' },
            { name: 'Mexico City, Mexico', lat: 19.4326, lng: -99.1332, country: 'MX', timezone: 'UTC-06:00' },
            { name: 'Lagos, Nigeria', lat: 6.5244, lng: 3.3792, country: 'NG', timezone: 'UTC+01:00' },
            { name: 'Johannesburg, South Africa', lat: -26.2041, lng: 28.0473, country: 'ZA', timezone: 'UTC+02:00' },
            { name: 'Karachi, Pakistan', lat: 24.8607, lng: 67.0011, country: 'PK', timezone: 'UTC+05:00' },
            { name: 'Lahore, Pakistan', lat: 31.5204, lng: 74.3587, country: 'PK', timezone: 'UTC+05:00' },
            { name: 'Dhaka, Bangladesh', lat: 23.8103, lng: 90.4125, country: 'BD', timezone: 'UTC+06:00' },
            { name: 'Colombo, Sri Lanka', lat: 6.9271, lng: 79.8612, country: 'LK', timezone: 'UTC+05:30' },
            { name: 'Kathmandu, Nepal', lat: 27.7172, lng: 85.3240, country: 'NP', timezone: 'UTC+05:45' },
            { name: 'Yangon, Myanmar', lat: 16.8661, lng: 96.1951, country: 'MM', timezone: 'UTC+06:30' },
            { name: 'Ho Chi Minh City, Vietnam', lat: 10.8231, lng: 106.6297, country: 'VN', timezone: 'UTC+07:00' },
            { name: 'Hanoi, Vietnam', lat: 21.0285, lng: 105.8542, country: 'VN', timezone: 'UTC+07:00' }
        ];
        
        // Form validation and interaction
        class BirthDetailsForm {
            constructor() {
                this.form = document.getElementById('birthDetailsForm');
                this.progressFill = document.getElementById('progressFill');
                this.initializeEventListeners();
                this.initializeLocationSearch();
                this.updateProgress();
            }
            
            initializeEventListeners() {
                // Form submission
                this.form.addEventListener('submit', (e) => this.handleSubmit(e));
                
                // Progress tracking
                const inputs = this.form.querySelectorAll('input[required], select[required]');
                inputs.forEach(input => {
                    input.addEventListener('input', () => this.updateProgress());
                    input.addEventListener('blur', () => this.validateField(input));
                });
                
                // Clear form
                document.getElementById('clearForm').addEventListener('click', () => this.clearForm());
                
                // Chart system dependency
                document.getElementById('chartSystem').addEventListener('change', (e) => {
                    this.updateAyanamsaVisibility(e.target.value);
                });
                
                // Auto-set default values
                this.setDefaultValues();
            }
            
            initializeLocationSearch() {
                const birthPlaceInput = document.getElementById('birthPlace');
                const suggestionsDiv = document.getElementById('locationSuggestions');
                const spinner = document.getElementById('locationSpinner');
                
                let searchTimeout;
                
                birthPlaceInput.addEventListener('input', (e) => {
                    clearTimeout(searchTimeout);
                    const query = e.target.value.trim();
                    
                    if (query.length < 2) {
                        suggestionsDiv.style.display = 'none';
                        return;
                    }
                    
                    searchTimeout = setTimeout(() => {
                        this.searchLocations(query, suggestionsDiv, spinner);
                    }, 300);
                });
                
                // Hide suggestions when clicking outside
                document.addEventListener('click', (e) => {
                    if (!e.target.closest('.location-search')) {
                        suggestionsDiv.style.display = 'none';
                    }
                });
            }
            
            searchLocations(query, suggestionsDiv, spinner) {
                spinner.style.display = 'inline-block';
                
                // Filter locations based on query
                const matches = locationData.filter(location =>
                    location.name.toLowerCase().includes(query.toLowerCase())
                ).slice(0, 10);
                
                // Simulate API delay
                setTimeout(() => {
                    spinner.style.display = 'none';
                    this.displayLocationSuggestions(matches, suggestionsDiv);
                }, 500);
            }
            
            displayLocationSuggestions(locations, suggestionsDiv) {
                suggestionsDiv.innerHTML = '';
                
                if (locations.length === 0) {
                    suggestionsDiv.innerHTML = '<div class="location-suggestion">No locations found</div>';
                    suggestionsDiv.style.display = 'block';
                    return;
                }
                
                locations.forEach(location => {
                    const suggestionDiv = document.createElement('div');
                    suggestionDiv.className = 'location-suggestion';
                    suggestionDiv.textContent = location.name;
                    suggestionDiv.addEventListener('click', () => this.selectLocation(location, suggestionsDiv));
                    suggestionsDiv.appendChild(suggestionDiv);
                });
                
                suggestionsDiv.style.display = 'block';
            }
            
            selectLocation(location, suggestionsDiv) {
                // Fill form fields
                document.getElementById('birthPlace').value = location.name;
                document.getElementById('latitude').value = location.lat;
                document.getElementById('longitude').value = location.lng;
                document.getElementById('country').value = location.country;
                document.getElementById('timezone').value = location.timezone;
                
                // Hide suggestions
                suggestionsDiv.style.display = 'none';
                
                // Update progress
                this.updateProgress();
            }
            
            setDefaultValues() {
                // Set default birth time to 12:00 PM if not specified
                document.getElementById('birthHour').value = '12';
                document.getElementById('birthMinute').value = '0';
                
                // Set default chart preferences
                document.getElementById('chartSystem').value = 'vedic';
                document.getElementById('houseSystem').value = 'placidus';
                document.getElementById('ayanamsa').value = 'lahiri';
                document.getElementById('language').value = 'en';
                
                this.updateProgress();
            }
            
            updateAyanamsaVisibility(chartSystem) {
                const ayanamsaGroup = document.getElementById('ayanamsa').closest('.form-group');
                if (chartSystem === 'western') {
                    ayanamsaGroup.style.display = 'none';
                    document.getElementById('ayanamsa').removeAttribute('required');
                } else {
                    ayanamsaGroup.style.display = 'block';
                    document.getElementById('ayanamsa').setAttribute('required', 'required');
                }
            }
            
            updateProgress() {
                const requiredFields = this.form.querySelectorAll('input[required], select[required]');
                let filledFields = 0;
                
                requiredFields.forEach(field => {
                    if (field.value.trim() !== '') {
                        filledFields++;
                    }
                });
                
                const progress = (filledFields / requiredFields.length) * 100;
                this.progressFill.style.width = `${progress}%`;
            }
            
            validateField(field) {
                const errorElement = document.getElementById(`${field.id}Error`);
                let isValid = true;
                let errorMessage = '';
                
                // Clear previous validation
                errorElement.className = 'validation-message';
                errorElement.textContent = '';
                
                // Required field validation
                if (field.hasAttribute('required') && field.value.trim() === '') {
                    isValid = false;
                    errorMessage = 'This field is required';
                }
                
                // Specific field validations
                switch (field.id) {
                    case 'firstName':
                    case 'lastName':
                        if (field.value.length > 0 && field.value.length < 2) {
                            isValid = false;
                            errorMessage = 'Name must be at least 2 characters long';
                        }
                        break;
                        
                    case 'email':
                        if (field.value.length > 0 && !this.isValidEmail(field.value)) {
                            isValid = false;
                            errorMessage = 'Please enter a valid email address';
                        }
                        break;
                        
                    case 'birthDate':
                        if (field.value) {
                            const birthDate = new Date(field.value);
                            const today = new Date();
                            const maxDate = new Date();
                            maxDate.setFullYear(today.getFullYear() - 150);
                            
                            if (birthDate > today) {
                                isValid = false;
                                errorMessage = 'Birth date cannot be in the future';
                            } else if (birthDate < maxDate) {
                                isValid = false;
                                errorMessage = 'Birth date cannot be more than 150 years ago';
                            }
                        }
                        break;
                        
                    case 'birthHour':
                        const hour = parseInt(field.value);
                        if (field.value !== '' && (hour < 0 || hour > 23)) {
                            isValid = false;
                            errorMessage = 'Hour must be between 0 and 23';
                        }
                        break;
                        
                    case 'birthMinute':
                        const minute = parseInt(field.value);
                        if (field.value !== '' && (minute < 0 || minute > 59)) {
                            isValid = false;
                            errorMessage = 'Minute must be between 0 and 59';
                        }
                        break;
                        
                    case 'latitude':
                        const lat = parseFloat(field.value);
                        if (field.value !== '' && (lat < -90 || lat > 90)) {
                            isValid = false;
                            errorMessage = 'Latitude must be between -90 and 90';
                        }
                        break;
                        
                    case 'longitude':
                        const lng = parseFloat(field.value);
                        if (field.value !== '' && (lng < -180 || lng > 180)) {
                            isValid = false;
                            errorMessage = 'Longitude must be between -180 and 180';
                        }
                        break;
                }
                
                // Display validation result
                if (!isValid) {
                    errorElement.className = 'validation-message validation-error';
                    errorElement.textContent = errorMessage;
                } else if (field.value.trim() !== '') {
                    errorElement.className = 'validation-message validation-success';
                    errorElement.textContent = '✓ Valid';
                }
                
                return isValid;
            }
            
            isValidEmail(email) {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return emailRegex.test(email);
            }
            
            validateForm() {
                const requiredFields = this.form.querySelectorAll('input[required], select[required]');
                let isValid = true;
                
                requiredFields.forEach(field => {
                    if (!this.validateField(field)) {
                        isValid = false;
                    }
                });
                
                return isValid;
            }
            
            handleSubmit(e) {
                e.preventDefault();
                
                if (!this.validateForm()) {
                    alert('Please fix the errors in the form before submitting.');
                    return;
                }
                
                // Collect form data
                const formData = new FormData(this.form);
                const birthData = Object.fromEntries(formData.entries());
                
                // Add calculated fields
                birthData.birthDateTime = `${birthData.birthDate}T${String(birthData.birthHour).padStart(2, '0')}:${String(birthData.birth